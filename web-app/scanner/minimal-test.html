<!DOCTYPE html>
<html>
<head>
  <title>Minimal Test</title>
  <style>
    body { font-family: monospace; margin: 20px; }
    .output { background: #f0f0f0; padding: 20px; border-radius: 4px; min-height: 200px; }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <h1>Minimal Scanner Test</h1>
  <div class="output" id="output"></div>

  <!-- Load each script individually with logging -->
  <script>
    window.log = function(msg, type = 'log') {
      const el = document.getElementById('output');
      const div = document.createElement('div');
      div.className = type;
      div.textContent = msg;
      el.appendChild(div);
      console.log(msg);
    };

    window.log('Starting script loads...');
  </script>

  <script src="chat-parser.js"></script>
  <script>
    if (typeof window.ChatParser !== 'undefined') {
      window.log('✅ ChatParser loaded', 'success');
    } else {
      window.log('❌ ChatParser NOT loaded', 'error');
    }
  </script>

  <script src="prompt-analyzer.js"></script>
  <script>
    if (typeof window.PromptAnalyzer !== 'undefined') {
      window.log('✅ PromptAnalyzer loaded', 'success');
    } else {
      window.log('❌ PromptAnalyzer NOT loaded', 'error');
    }
  </script>

  <script src="refinery-engine.js"></script>
  <script>
    if (typeof window.RefineryEngine !== 'undefined') {
      window.log('✅ RefineryEngine loaded', 'success');
    } else {
      window.log('❌ RefineryEngine NOT loaded', 'error');
    }
  </script>

  <script src="refinery-ui.js"></script>
  <script>
    if (typeof window.RefineryUI !== 'undefined') {
      window.log('✅ RefineryUI loaded', 'success');
    } else {
      window.log('❌ RefineryUI NOT loaded', 'error');
    }
  </script>

  <script src="scanner-refinery-integration.js"></script>
  <script>
    if (typeof window.ScannerWithRefinery !== 'undefined') {
      window.log('✅ ScannerWithRefinery loaded', 'success');
    } else {
      window.log('❌ ScannerWithRefinery NOT loaded', 'error');
    }
  </script>

  <script>
    // Try to instantiate and test
    window.log('');
    window.log('Testing instantiation...');
    
    try {
      const pa = new window.PromptAnalyzer();
      const result = pa.analyze('Test prompt');
      window.log('✅ Analysis works! Score: ' + result.overall, 'success');
    } catch (e) {
      window.log('❌ Error: ' + e.message, 'error');
    }
  </script>
</body>
</html>
