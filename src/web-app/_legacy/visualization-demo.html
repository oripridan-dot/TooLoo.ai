<!DOCTYPE html>
<!-- @version 2.1.28 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TooLoo ‚Ä¢ Visual Feedback Demo</title>
  <link rel="stylesheet" href="visual-feedback.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #0a0e27; color: #e2e8f0; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { margin-bottom: 40px; }
    .title { font-size: 28px; font-weight: 700; color: #3b82f6; margin-bottom: 8px; }
    .subtitle { font-size: 14px; color: #94a3b8; }
    .demo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 40px; }
    .demo-section { background: rgba(30, 41, 59, 0.4); border: 1px solid rgba(148, 163, 184, 0.1); border-radius: 8px; padding: 20px; }
    .section-title { font-size: 14px; font-weight: 700; color: #60a5fa; text-transform: uppercase; margin-bottom: 20px; }
    .button-group { display: flex; gap: 8px; margin-top: 16px; }
    button { padding: 8px 16px; background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.3); color: #60a5fa; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.2s ease; }
    button:hover { background: rgba(59, 130, 246, 0.25); }
    .controls { display: flex; gap: 8px; flex-wrap: wrap; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">üé® TooLoo Visual Feedback System Demo</div>
      <div class="subtitle">Real-time progress indicators + emotionally resonant visualizations</div>
    </div>

    <div class="demo-grid">
      <!-- Progress Indicator Demo -->
      <div class="demo-section">
        <div class="section-title">‚è≥ Progress Indicator</div>
        <div id="progress-demo"></div>
        <div class="button-group">
          <button onclick="simulateProgress()">Start Processing</button>
          <button onclick="resetProgress()">Reset</button>
        </div>
      </div>

      <!-- Bar Chart Demo -->
      <div class="demo-section">
        <div class="section-title">üìä Bar Chart</div>
        <div id="bar-chart-demo"></div>
        <button onclick="updateBarChart()" style="width: 100%;">Randomize Values</button>
      </div>

      <!-- Metric Cards Demo -->
      <div class="demo-section">
        <div class="section-title">üìà Metric Cards</div>
        <div id="metric-1"></div>
        <div id="metric-2"></div>
        <div id="metric-3"></div>
        <button onclick="updateMetrics()" style="width: 100%; margin-top: 12px;">Update Metrics</button>
      </div>

      <!-- Status Indicator Demo -->
      <div class="demo-section">
        <div class="section-title">üü¢ Status Indicator</div>
        <div id="status-demo"></div>
        <p style="font-size: 11px; color: #94a3b8; margin-top: 12px;">Auto-cycling between status states every 2 seconds</p>
      </div>

      <!-- Gauge Chart Demo -->
      <div class="demo-section">
        <div class="section-title">üéØ Gauge Chart</div>
        <div id="gauge-demo"></div>
        <button onclick="updateGauge()" style="width: 100%;">Update Value</button>
      </div>

      <!-- Pie Chart Demo -->
      <div class="demo-section">
        <div class="section-title">ü•ß Pie Chart</div>
        <div id="pie-demo"></div>
        <button onclick="updatePie()" style="width: 100%;">Randomize Distribution</button>
      </div>
    </div>

    <!-- Full-width Examples -->
    <div style="background: rgba(30, 41, 59, 0.4); border: 1px solid rgba(148, 163, 184, 0.1); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
      <div class="section-title">üìä Complete Example: Query Processing Flow</div>
      <p style="font-size: 12px; color: #cbd5e1; margin-bottom: 20px;">
        Simulates a complete TooLoo query processing flow with real-time progress feedback
      </p>
      <div id="query-progress"></div>
      <button onclick="simulateQueryFlow()" style="width: 100%; margin-top: 16px;">Simulate Complete Query</button>
    </div>

    <!-- Real-time Performance Dashboard -->
    <div style="background: rgba(30, 41, 59, 0.4); border: 1px solid rgba(148, 163, 184, 0.1); border-radius: 8px; padding: 20px;">
      <div class="section-title">‚ö° Live Performance Dashboard</div>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
        <div id="live-metric-1"></div>
        <div id="live-metric-2"></div>
        <div id="live-metric-3"></div>
        <div id="live-metric-4"></div>
      </div>
      <p style="font-size: 11px; color: #94a3b8;">Updates automatically every 1 second</p>
    </div>
  </div>

  <script src="visual-feedback-engine.js"></script>
  <script>
    const viz = new VisualFeedbackEngine();

    // ==================== PROGRESS DEMO ====================
    let progressInstance = null;
    function simulateProgress() {
      if (progressInstance) return;
      
      progressInstance = viz.createProgressIndicator('progress-demo', {
        label: 'Processing Query',
        maxSteps: 5,
        emotionalMode: true
      });

      let step = 0;
      const statuses = [
        'Parsing input...',
        'Querying 5 providers...',
        'Generating synthesis...',
        'Extracting actions...',
        'Complete! üéâ'
      ];

      const interval = setInterval(() => {
        step++;
        progressInstance.update(step, statuses[step - 1]);
        if (step >= 5) {
          clearInterval(interval);
          setTimeout(() => { progressInstance = null; }, 2000);
        }
      }, 800);
    }

    function resetProgress() {
      progressInstance = null;
      document.getElementById('progress-demo').innerHTML = '';
    }

    // ==================== BAR CHART DEMO ====================
    let barChartInstance = null;
    function createBarChart() {
      document.getElementById('bar-chart-demo').innerHTML = '';
      const data = [
        { label: 'Query Speed', value: 72, color: '#3b82f6' },
        { label: 'Accuracy', value: 84, color: '#10b981' },
        { label: 'Cache Hits', value: 68, color: '#f59e0b' }
      ];
      barChartInstance = viz.createDataVisualization('bar-chart-demo', data, {
        type: 'bar',
        title: 'Performance Metrics',
        interactive: true
      });
    }

    function updateBarChart() {
      const data = [
        { label: 'Query Speed', value: Math.floor(Math.random() * 100), color: '#3b82f6' },
        { label: 'Accuracy', value: Math.floor(Math.random() * 100), color: '#10b981' },
        { label: 'Cache Hits', value: Math.floor(Math.random() * 100), color: '#f59e0b' }
      ];
      document.getElementById('bar-chart-demo').innerHTML = '';
      viz.createDataVisualization('bar-chart-demo', data, {
        type: 'bar',
        title: 'Performance Metrics (Updated)',
        interactive: true
      });
    }

    // ==================== METRIC CARDS DEMO ====================
    let metrics = {};
    function createMetrics() {
      metrics.metric1 = viz.createMetricCard('metric-1', {
        label: 'Response Time',
        value: 245,
        unit: 'ms',
        trend: 'down',
        goal: 200,
        color: '#3b82f6'
      });

      metrics.metric2 = viz.createMetricCard('metric-2', {
        label: 'Accuracy Score',
        value: 84,
        unit: '%',
        trend: 'up',
        goal: 95,
        color: '#10b981'
      });

      metrics.metric3 = viz.createMetricCard('metric-3', {
        label: 'Provider Diversity',
        value: 4.8,
        unit: '/5',
        trend: 'neutral',
        color: '#f59e0b'
      });
    }

    function updateMetrics() {
      const speed = Math.floor(Math.random() * 400);
      const accuracy = Math.floor(Math.random() * 100);
      const diversity = (Math.random() * 5).toFixed(1);

      metrics.metric1.update(speed, speed < 245 ? 'down' : 'up');
      metrics.metric2.update(accuracy, accuracy > 84 ? 'up' : 'down');
      metrics.metric3.update(diversity, 'neutral');
    }

    // ==================== STATUS INDICATOR DEMO ====================
    function createStatusIndicator() {
      viz.createStatusIndicator('status-demo', {
        statuses: ['‚úì Online', '‚ö° Processing', 'üîß Optimizing'],
        refreshInterval: 2000
      });
    }

    // ==================== GAUGE CHART DEMO ====================
    function createGaugeChart() {
      const data = [{ label: 'System Health', value: 94, max: 100 }];
      viz.createDataVisualization('gauge-demo', data, {
        type: 'gauge',
        title: 'Overall Health'
      });
    }

    function updateGauge() {
      document.getElementById('gauge-demo').innerHTML = '';
      const value = Math.floor(Math.random() * 100);
      const data = [{ label: 'System Health', value, max: 100 }];
      viz.createDataVisualization('gauge-demo', data, {
        type: 'gauge',
        title: 'Overall Health'
      });
    }

    // ==================== PIE CHART DEMO ====================
    function createPieChart() {
      const data = [
        { label: 'Claude', value: 28, color: '#8b5cf6' },
        { label: 'GPT-4', value: 26, color: '#06b6d4' },
        { label: 'Gemini', value: 24, color: '#f59e0b' },
        { label: 'DeepSeek', value: 14, color: '#ef4444' },
        { label: 'Ollama', value: 8, color: '#10b981' }
      ];
      viz.createDataVisualization('pie-demo', data, {
        type: 'pie',
        title: 'Provider Distribution'
      });
    }

    function updatePie() {
      document.getElementById('pie-demo').innerHTML = '';
      const total = 100;
      const providers = ['Claude', 'GPT-4', 'Gemini', 'DeepSeek', 'Ollama'];
      const colors = ['#8b5cf6', '#06b6d4', '#f59e0b', '#ef4444', '#10b981'];
      
      let remaining = total;
      const data = providers.map((label, i) => {
        const value = i === providers.length - 1 ? remaining : Math.floor(Math.random() * (remaining / 2));
        remaining -= value;
        return { label, value, color: colors[i] };
      });

      viz.createDataVisualization('pie-demo', data, {
        type: 'pie',
        title: 'Provider Distribution (Random)'
      });
    }

    // ==================== COMPLETE QUERY FLOW ====================
    async function simulateQueryFlow() {
      const progress = viz.createProgressIndicator('query-progress', {
        label: 'Complete Query Processing',
        maxSteps: 5,
        emotionalMode: true
      });

      const steps = [
        { step: 1, status: 'Parsing user input...' },
        { step: 2, status: 'Querying 5 AI providers...' },
        { step: 3, status: 'Generating multi-provider synthesis...' },
        { step: 4, status: 'Extracting action items...' },
        { step: 5, status: 'Complete! Results ready üéâ' }
      ];

      for (const { step, status } of steps) {
        await new Promise(resolve => setTimeout(resolve, 1200));
        progress.update(step, status);
      }
    }

    // ==================== LIVE DASHBOARD ====================
    let liveMetrics = {};
    function createLiveDashboard() {
      liveMetrics.m1 = viz.createMetricCard('live-metric-1', {
        label: 'Queries/sec',
        value: Math.floor(Math.random() * 100),
        trend: 'up',
        color: '#3b82f6'
      });

      liveMetrics.m2 = viz.createMetricCard('live-metric-2', {
        label: 'Avg Response',
        value: Math.floor(Math.random() * 500),
        unit: 'ms',
        trend: 'down',
        color: '#10b981'
      });

      liveMetrics.m3 = viz.createMetricCard('live-metric-3', {
        label: 'Cache Hit %',
        value: Math.floor(Math.random() * 100),
        unit: '%',
        trend: 'up',
        color: '#f59e0b'
      });

      liveMetrics.m4 = viz.createMetricCard('live-metric-4', {
        label: 'System Load',
        value: (Math.random() * 100).toFixed(1),
        unit: '%',
        trend: 'neutral',
        color: '#ef4444'
      });

      // Auto-update every second
      setInterval(() => {
        liveMetrics.m1.update(Math.floor(Math.random() * 100), Math.random() > 0.5 ? 'up' : 'down');
        liveMetrics.m2.update(Math.floor(Math.random() * 500), Math.random() > 0.5 ? 'down' : 'up');
        liveMetrics.m3.update(Math.floor(Math.random() * 100), Math.random() > 0.5 ? 'up' : 'down');
        liveMetrics.m4.update((Math.random() * 100).toFixed(1), 'neutral');
      }, 1000);
    }

    // ==================== INITIALIZE ALL ====================
    window.addEventListener('DOMContentLoaded', () => {
      createBarChart();
      createMetrics();
      createStatusIndicator();
      createGaugeChart();
      createPieChart();
      createLiveDashboard();
    });
  </script>
</body>
</html>
