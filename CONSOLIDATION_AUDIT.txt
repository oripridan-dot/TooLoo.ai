// CONSOLIDATION AUDIT - November 4, 2025
// Current State: 38 servers, massive architectural debt

// ============================================================================
// CORE 8 SERVERS TO KEEP
// ============================================================================

✅ KEEP - ESSENTIAL:
1. web-server.js (port 3000) - UI hub + static proxy
2. orchestrator.js (port 3123) - Command center + system health
3. training-server.js (port 3001) - Hyper-speed learning
4. meta-server.js (port 3002) - Meta-learning optimization
5. budget-server.js (port 3003) - Provider management + cost control
6. coach-server.js (port 3004) - Auto-coach + feedback loops
7. product-development-server.js (port 3006) - Workflows + artifact ledger
8. cup-server.js (port 3005) - Provider tournaments

// ============================================================================
// DEPRECATED SERVERS TO DELETE (30 total)
// ============================================================================

❌ DELETE - REDUNDANT/EXPERIMENTAL:

Analytics & Reporting (MERGE INTO reports-server logic):
  ✗ analytics-server.js - Duplicate of reports-server
  ✗ infographics-server.js - Unused UI component
  ✗ reports-server.js - Can merge into orchestrator metrics

Chat & Messaging (NOT CORE):
  ✗ chat-api-bridge.js - Experimental, can be UI feature
  ✗ webhooks-server.js - Experimental webhook handling

Capabilities Management (EXPERIMENTAL):
  ✗ capabilities-server.js - Recently added, not core workflow
  ✗ capability-workflow-bridge.js - Bridge logic, can inline

System Management (DUPLICATES):
  ✗ deployment-controller.js - Overlaps orchestrator
  ✗ deployment-monitor.js - Overlaps orchestrator
  ✗ server-dashboard.js - Overlaps web-server UI
  ✗ server-manager.js - Overlaps orchestrator
  ✗ server-monitor.js - Overlaps orchestrator heartbeat

External Integration (OPTIONAL):
  ✗ github-context-server.js - Can be lib/adapters
  ✗ oauth-server.js - Can be middleware in web-server
  ✗ design-integration-server.js - Can be lib/adapters
  ✗ integrations-server.js - Can be lib/adapters

Domain Management (EXPERIMENTAL):
  ✗ domains-server.js - Low priority, can defer
  ✗ sources-server.js - Low priority

Business Logic (EXPERIMENTAL):
  ✗ aggregator-server.js - Duplicate product analysis
  ✗ automated-commit-service.js - Low priority
  ✗ challenge-server.js - Low priority
  ✗ events-server.js - Can be event emitter in orchestrator
  ✗ ide-server.js - UI feature, not server
  ✗ planning-api-routes.js - Legacy planning, can defer
  ✗ providers-arena-server.js - Can be merged into product-dev
  ✗ segmentation-server.js - Can merge into coach-server
  ✗ self-improvement-server.js - Low priority
  ✗ ui-activity-monitor.js - Can be middleware

Variants:
  ✗ web-server-lite.js - Duplicate of web-server

// ============================================================================
// DELETION PRIORITY
// ============================================================================

PHASE 1 (SAFE DELETES - 15 files):
1. analytics-server.js ✗
2. infographics-server.js ✗
3. server-dashboard.js ✗
4. server-manager.js ✗
5. server-monitor.js ✗
6. deployment-controller.js ✗
7. deployment-monitor.js ✗
8. ide-server.js ✗
9. challenge-server.js ✗
10. automated-commit-service.js ✗
11. sources-server.js ✗
12. web-server-lite.js ✗
13. capability-workflow-bridge.js ✗
14. ui-activity-monitor.js ✗
15. infographics-engine.js ✗

PHASE 2 (CONDITIONAL DELETES - 10 files):
16. webhooks-server.js ✗ (if no active integrations)
17. chat-api-bridge.js ✗ (if chat in web-server)
18. aggregator-server.js ✗ (if product-dev handles aggregation)
19. segmentation-server.js ✗ (if merged into coach-server)
20. providers-arena-server.js ✗ (if merged into product-dev)
21. events-server.js ✗ (if using event emitter)
22. domains-server.js ✗ (low priority)
23. planning-api-routes.js ✗ (legacy, defer)
24. self-improvement-server.js ✗ (low priority)
25. github-context-server.js ✗ (move to adapters)

PHASE 3 (EXTERNAL SERVICES - keep as middleware):
26. oauth-server.js → middleware in web-server.js
27. design-integration-server.js → lib/adapters/design.js
28. integrations-server.js → lib/adapters/integrations.js

// ============================================================================
// ENGINE CONSOLIDATION
// ============================================================================

KEEP (Core 12 engines):
✅ llm-provider.js - Single AI gateway
✅ product-analysis-engine.js - Product innovation analysis
✅ metrics-collector.js - System telemetry
✅ meta-learning-engine.js - Meta-learning loops
✅ training-camp.js - Hyper-speed training
✅ auto-coach-engine.js - Coaching logic
✅ provider-cup.js - Tournament system
✅ user-model-engine.js - User profiling
✅ segmentation-guardian.js - Conversation traits (16-trait analyzer)
✅ repo-auto-org.js - Codebase hygiene
✅ adaptive-learning-engine.js - Personalization
✅ cost-calculator.js - Budget tracking

ARCHIVE → /deprecated (15+ files):
❌ advanced-consensus.js - Duplicate analysis
❌ autonomous-evolution-engine.js - Experimental
❌ book-mastery-engine.js - Niche feature
❌ doctoral-mastery-engine.js - Niche feature
❌ evolving-product-genesis-engine.js - Experimental
❌ hyper-speed-training-camp.js - Duplicate of training-camp.js
❌ multi-modal-validator.js - Unused validator
❌ parallel-provider-orchestrator.js - Merged into llm-provider
❌ pattern-extractor.js - Unused
❌ predictive-context-engine.js - Experimental
❌ real-engine-integrator.js - Experimental
❌ screen-capture-service.js - Niche feature
❌ summarizer.js - Can be LLM call
❌ tooloo-vs-baseline-comparison.js - Analysis tool, not core engine
❌ user-feedback.js - Can be web-server endpoint
❌ web-source-pipeline-manager.js - Low priority
❌ enhanced-learning-accumulator.js - Duplicate
❌ analytics-engine.js - Can be reports-server (recently added)
❌ capabilities-manager.js - Recently added, not proven

// ============================================================================
// DOCUMENTATION CLEANUP
// ============================================================================

KEEP (5 files):
✅ README.md - Single entry point
✅ ARCHITECTURE.md - System design (TO BE CREATED)
✅ DEPLOYMENT.md - Deployment guide
✅ .github/CONTRIBUTING.md - Contribution guidelines
✅ .github/CODEOWNERS - Ownership rules

DELETE (80+ files) - All these:
❌ *COMPLETE*.md (20+ files)
❌ *STATUS*.md (15+ files)
❌ *SUMMARY*.md (20+ files)
❌ *DEPLOYMENT*.md variants (5+ files)
❌ *PHASE*.md variants (15+ files)
❌ QUICK*.md, *QUICK*.md (10+ files)
❌ UNIMPLEMENTED*.md (2 files)
❌ QUICK_START*.md (3 files)
❌ STARTUP*.md (5+ files)
❌ All .github/ISSUES/*.md (move to GitHub Issues)

// ============================================================================
// TEST CONSOLIDATION
// ============================================================================

KEEP (5 focused test files):
✅ tests/integration/core-services.integration.test.js (NEW - consolidates 3 existing)
✅ tests/smoke-test.js (NEW - 5-minute validation)
✅ tests/unit/engines.test.js (NEW - engine logic)
✅ tests/unit/llm-provider.test.js (NEW - provider tests)
✅ tests/integration/end-to-end.test.js (NEW - full workflow)

DELETE (25 files):
❌ tests/integration/capabilities-server.integration.test.js
❌ tests/integration/cup-server.integration.test.js
❌ tests/integration/product-dev-server.integration.test.js
❌ tests/phase-*.js (5+ files)
❌ tests/orchestrator-and-product-analysis.test.js
❌ tests/quick-format-test.js
❌ tests/*enhancements*.test.js (3+ files)
❌ All experimental phase tests

// ============================================================================
// CONFIGURATION FILES
// ============================================================================

DELETE (Consolidate into one):
❌ .env variants
❌ Multiple config files

CREATE:
✅ config/system-manifest.js - Single source of truth

// ============================================================================
// SCRIPT CLEANUP
// ============================================================================

KEEP (core scripts):
✅ scripts/tooloo.js - Main entry point
✅ npm run dev - Development start
✅ npm run start:simple - Simple mode
✅ npm run stop:all - Clean shutdown
✅ npm run clean - Full cleanup

DELETE:
❌ demo-phase-*.sh (2 files)
❌ dev-restart-fresh.sh
❌ dev-watchdog.sh
❌ monitor-phase-*.sh
❌ All phase-specific scripts

// ============================================================================
// EXPECTED OUTCOMES
// ============================================================================

BEFORE:
  - 38 servers
  - 40+ engines
  - 100+ doc files
  - 30+ test files
  - Confusing working tree

AFTER:
  - 8 core servers + 3 optional adapters
  - 12 core engines + /deprecated archive
  - 5 documentation files
  - 5 focused test suites
  - Clean working tree (no untracked files)
  - Single source of truth (ARCHITECTURE.md + system-manifest.js)

SYSTEM PROPERTIES:
  ✅ Focused - Only essential features
  ✅ Stable - Well-tested, proven patterns
  ✅ Consistent - Same code style everywhere
  ✅ Maintainable - Clear ownership
  ✅ Scalable - Easy to add features without breaking things
  ✅ Observable - Centralized metrics + logging
