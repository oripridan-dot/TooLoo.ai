<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design Applier Component Test</title>
  <style>
    :root {
      /* Initial Cueberto Design System */
      --bg: #161616;
      --bg-soft: #1a1a1a;
      --card: #222222;
      --text: #fafafa;
      --muted: #b7b7b7;
      --brand: #fc0019;
      --brand-2: #da532c;
      --accent: #fc0019;
      --danger: #eb4242;
      --success: #00e9b0;
      --shadow: 0 10px 30px rgba(0,0,0,0.5);
      --radius: 12px;
      --grid: 8px;
      --font-primary: "Suisse Intl", system-ui, -apple-system, Segoe UI, sans-serif;
      --font-secondary: "Manrope", system-ui, -apple-system, sans-serif;
      --font-mono: "JetBrains Mono", monospace;
    }
    
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; }

    body {
      background: linear-gradient(135deg, #161616 0%, #1a1a1a 50%, #0f1218 100%);
      color: var(--text);
      font-family: var(--font-primary);
      line-height: 1.6;
      padding: 40px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
    }

    h1 {
      margin-bottom: 30px;
      font-size: 28px;
    }

    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .component {
      padding: 20px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: var(--radius);
    }

    .component h2 {
      font-size: 14px;
      color: var(--muted);
      margin: 0 0 15px 0;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn {
      padding: 8px 14px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.04);
      color: var(--text);
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.2s;
      font-family: var(--font-primary);
    }

    .btn:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.16);
      transform: translateY(-1px);
    }

    .btn.primary {
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      border-color: var(--brand);
      color: white;
    }

    .btn.primary:hover {
      opacity: 0.85;
    }

    .color-swatch {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      background: rgba(255,255,255,0.03);
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .color-box {
      width: 60px;
      height: 60px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .color-info {
      flex: 1;
      font-size: 12px;
    }

    .color-info strong {
      display: block;
      color: var(--text);
    }

    .color-info code {
      color: var(--muted);
      font-family: var(--font-mono);
      font-size: 11px;
    }

    .controls {
      padding: 20px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: var(--radius);
      margin-top: 40px;
    }

    .controls h2 {
      font-size: 14px;
      color: var(--muted);
      margin: 0 0 15px 0;
      text-transform: uppercase;
    }

    .button-group {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .status {
      padding: 15px;
      background: rgba(0,233,176,0.1);
      border: 1px solid rgba(0,233,176,0.3);
      border-radius: 6px;
      font-size: 12px;
      color: var(--text);
      display: none;
      font-family: var(--font-mono);
    }

    .status.show {
      display: block;
    }

    .status.success {
      background: rgba(0,233,176,0.15);
      border-color: rgba(0,233,176,0.4);
      color: var(--success);
    }

    .status.error {
      background: rgba(235,66,66,0.15);
      border-color: rgba(235,66,66,0.4);
      color: var(--danger);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ¨ Design Applier Component Test</h1>
    
    <div class="test-grid">
      <!-- Primary Buttons -->
      <div class="component">
        <h2>Primary Buttons</h2>
        <button class="btn primary">ðŸš€ Primary Action</button>
        <button class="btn primary" style="margin-top: 8px; width: 100%;">Transform TooLoo Now</button>
      </div>

      <!-- Secondary Buttons -->
      <div class="component">
        <h2>Secondary Buttons</h2>
        <button class="btn">Default Button</button>
        <button class="btn" style="margin-top: 8px;">Secondary Action</button>
      </div>

      <!-- Color Swatches -->
      <div class="component">
        <h2>Color Tokens</h2>
        <div class="color-swatch">
          <div class="color-box" id="brandSwatch" style="background: var(--brand);"></div>
          <div class="color-info">
            <strong>Brand Primary</strong>
            <code id="brandCode">var(--brand)</code>
          </div>
        </div>
        <div class="color-swatch">
          <div class="color-box" id="accentSwatch" style="background: var(--accent);"></div>
          <div class="color-info">
            <strong>Accent</strong>
            <code id="accentCode">var(--accent)</code>
          </div>
        </div>
        <div class="color-swatch">
          <div class="color-box" id="bgSwatch" style="background: var(--bg);"></div>
          <div class="color-info">
            <strong>Background</strong>
            <code id="bgCode">var(--bg)</code>
          </div>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <h2>Design System Control</h2>
      <div class="button-group">
        <button class="btn primary" onclick="applyTestDesign()">Apply Test Design (Neon)</button>
        <button class="btn" onclick="resetDesign()">Reset to Default</button>
      </div>
      <div id="status" class="status"></div>
    </div>
  </div>

  <script>
    function updateStatus(message, type = 'info') {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = `status show ${type}`;
      console.log(`[${type.toUpperCase()}] ${message}`);
    }

    async function applyTestDesign() {
      updateStatus('Calling API...', 'info');
      
      try {
        // Test design with neon colors
        const testDesign = {
          colors: {
            primary: '#ff00ff',
            secondary: '#00ffff',
            background: '#0a0a0a',
            text: '#ffffff'
          },
          typography: {
            primary: 'Courier New, monospace',
            secondary: 'Monaco, monospace'
          }
        };
        
        const response = await fetch('/api/v1/design/apply-system', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(testDesign)
        });
        
        const data = await response.json();
        const cssVars = data.content?.cssVariables;
        
        if (!cssVars) {
          throw new Error('No CSS variables in response');
        }
        
        updateStatus('Applying CSS variables...', 'info');
        
        // Apply to document
        const root = document.documentElement;
        Object.entries(cssVars).forEach(([key, value]) => {
          root.style.setProperty(key, value);
        });
        
        // Update color swatches
        const brandColor = cssVars['--brand'];
        const accentColor = cssVars['--accent'];
        const bgColor = cssVars['--bg'];
        
        document.getElementById('brandSwatch').style.background = brandColor;
        document.getElementById('brandCode').textContent = `${brandColor}`;
        
        document.getElementById('accentSwatch').style.background = accentColor;
        document.getElementById('accentCode').textContent = `${accentColor}`;
        
        document.getElementById('bgSwatch').style.background = bgColor;
        document.getElementById('bgCode').textContent = `${bgColor}`;
        
        updateStatus(`âœ… Design applied! --brand: ${brandColor}, --accent: ${accentColor}, --bg: ${bgColor}`, 'success');
      } catch (err) {
        updateStatus(`âŒ Error: ${err.message}`, 'error');
      }
    }

    function resetDesign() {
      const defaults = {
        '--bg': '#161616',
        '--bg-soft': '#1a1a1a',
        '--card': '#222222',
        '--text': '#fafafa',
        '--muted': '#b7b7b7',
        '--brand': '#fc0019',
        '--brand-2': '#da532c',
        '--accent': '#fc0019',
        '--font-primary': '"Suisse Intl", system-ui, -apple-system, Segoe UI, sans-serif',
        '--font-secondary': '"Manrope", system-ui, -apple-system, sans-serif'
      };
      
      const root = document.documentElement;
      Object.entries(defaults).forEach(([key, value]) => {
        root.style.setProperty(key, value);
      });
      
      location.reload();
    }
  </script>
</body>
</html>
